ALTER TABLE TCSIP_CPORTAL.TBL_SURVEYUSERMAP ADD DELEGATETRANSID  VARCHAR2 (200 CHAR);
ALTER TABLE TCSIP_CPORTAL.TBL_SURVEYUSERMAP ADD ISSURVEYACCEPTED VARCHAR2 (1 CHAR) DEFAULT 'N';

COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYUSERMAP.DELEGATETRANSID IS 'Mapping id of the Delegate Recepient';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYUSERMAP.ISSURVEYACCEPTED  IS 'Is Survey accepted status';
-------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP( 
COMPLETEDELEGATIONMAPID          NUMBER(38,0) NOT NULL,
PRINCIPALINVESTIGATORID          VARCHAR2(200 CHAR) NOT NULL,
DELEGATERECIPIENTID            VARCHAR2(200 CHAR) NOT NULL,
ISACTIVE          			  VARCHAR2(1 CHAR) NOT NULL,
CREATEDBY                     VARCHAR2(100 CHAR) NOT NULL,
CREATEDDT                     DATE  NOT NULL ,     
MODIFIEDBY                    VARCHAR2(100 CHAR),
MODIFIEDDT      	           	DATE
);

ALTER TABLE TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP ADD CONSTRAINT TBL_COMPLETEDELEGATIONMAP_PK PRIMARY KEY (COMPLETEDELEGATIONMAPID);
CREATE SEQUENCE TCSIP_CPORTAL.SEQ_COMPLETEDELEGATIONMAP MINVALUE 1 MAXVALUE 999999999999999999999999999 START WITH 1 INCREMENT BY 1 NOCACHE;

COMMENT ON TABLE TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP IS 'Table to store the mapping between complete delegation of Potential Investigator and recipient';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP.COMPLETEDELEGATIONMAPID IS 'Sequence generated primary key';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP.PRINCIPALINVESTIGATORID IS 'Transcelerate id for Principal Investigator';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP.DELEGATERECIPIENTID IS 'Transcelerate id for Recepient'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP.ISACTIVE IS 'Active Flag'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP.CREATEDDT IS 'Created date'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP.CREATEDBY IS 'Created by'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP.MODIFIEDDT IS 'Modified date'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_COMPLETEDELEGATIONMAP.MODIFIEDBY IS 'Modified by'; 

-------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS ( 
RESPONSESECTIONSTATUSID       NUMBER(38,0) NOT NULL,
SURVEYID          			  NUMBER(38,0) NOT NULL,
SECTIONNAME            		  VARCHAR2(200 CHAR) NOT NULL,
STATUS          			  VARCHAR2(1 CHAR) NOT NULL,
TRANSCELERATEID				  VARCHAR2(200 CHAR) NOT NULL,
CREATEDBY                  	  VARCHAR2(100 CHAR) NOT NULL,
CREATEDDT                     DATE  NOT NULL ,     
MODIFIEDBY                    VARCHAR2(100 CHAR),
MODIFIEDDT      	          DATE
);

ALTER TABLE TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS  ADD CONSTRAINT TBL_RESPONSESECTIONSTATUS_PK PRIMARY KEY (RESPONSESECTIONSTATUSID);
ALTER TABLE TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS ADD CONSTRAINT TBL_RESPONSESECTIONSTATUS_FK FOREIGN KEY ( SURVEYID ) REFERENCES TBL_SURVEY ( SURVEYID );
CREATE SEQUENCE TCSIP_CPORTAL.SEQ_RESPONSESECTIONSTATUS  MINVALUE 1 MAXVALUE 999999999999999999999999999 START WITH 1 INCREMENT BY 1 NOCACHE;

COMMENT ON TABLE TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS  IS 'Table to store the section status for Survey Response of recipient';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS.RESPONSESECTIONSTATUSID IS 'Sequence generated primary key';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS.SURVEYID IS 'Foreign key for TBL_SURVEY, SURVEYID column';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS.SECTIONNAME IS 'Response Secition name'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS.STATUS IS 'Response Secition Status'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS.TRANSCELERATEID IS 'Transcelerate id for logged in user ';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS.CREATEDDT IS 'Created date'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS.CREATEDBY IS 'Created by'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS.MODIFIEDDT IS 'Modified date'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS.MODIFIEDBY IS 'Modified by'; 

-------------------------------------------------------------------------------------------------------------------------------------------------


CREATE TABLE TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS ( 
DELRESPONSESECTIONSTATUSID       NUMBER(38,0) NOT NULL,
SURVEYID          			  NUMBER(38,0) NOT NULL,
SECTIONNAME            		  VARCHAR2(200 CHAR) NOT NULL,
STATUS          			  VARCHAR2(1 CHAR) NOT NULL,
DELGATETRANSID				  VARCHAR2(200 CHAR) NOT NULL,
IMPERSONATEID				  VARCHAR2(200 CHAR) NOT NULL,
CREATEDBY                  	  VARCHAR2(100 CHAR) NOT NULL,
CREATEDDT                     DATE  NOT NULL ,     
MODIFIEDBY                    VARCHAR2(100 CHAR),
MODIFIEDDT      	          DATE
);

ALTER TABLE TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS  ADD CONSTRAINT TBL_DELRESPSECTIONSTATUS_PK PRIMARY KEY (DELRESPONSESECTIONSTATUSID);
ALTER TABLE TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS ADD CONSTRAINT TBL_DELRESPSECTIONSTATUS_FK FOREIGN KEY ( SURVEYID ) REFERENCES TBL_SURVEY ( SURVEYID );
CREATE SEQUENCE TCSIP_CPORTAL.SEQ_DELRESPONSESECTIONSTATUS  MINVALUE 1 MAXVALUE 999999999999999999999999999 START WITH 1 INCREMENT BY 1 NOCACHE;

COMMENT ON TABLE TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS  IS 'Table to store the section status for Survey Response of delegate (partial delegation), ';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS.DELRESPONSESECTIONSTATUSID IS 'Sequence generated primary key';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS.SURVEYID IS 'Foreign key for TBL_SURVEY, SURVEYID column';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS.SECTIONNAME IS 'Delegation Response Secition name'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS.STATUS IS 'DelegationResponse Secition Status'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS.DELGATETRANSID IS 'Transcelerate id for logged in user';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS.IMPERSONATEID IS 'Transcelerate id for for delegator';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS.CREATEDDT IS 'Created date'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS.CREATEDBY IS 'Created by'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS.MODIFIEDDT IS 'Modified date'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_DELRESPONSESECTIONSTATUS.MODIFIEDBY IS 'Modified by'; 
-----------------------------------------------------------------------------------------------------------------------------------------------------

alter table TCSIP_CPORTAL.TBL_RESPONSESECTIONSTATUS add SURVEYUSERMAPID NUMBER(38,0) ;

ALTER TABLE TCSIP_CPORTAL.TBL_SURVEY ADD PLANNEDCLOSEDDT DATE ;
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEY.PLANNEDCLOSEDDT IS 'Planned survey close date';
ALTER TABLE TCSIP_CPORTAL.TBL_SURVEY ADD RESPONSEDAYS NUMBER(38,0) ;
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEY.RESPONSEDAYS IS 'Survey response date';

-------------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR  ( 
SURVEYREFERINVESTIGATORID       NUMBER(38,0) NOT NULL,
SURVEYID          			  NUMBER(38,0) NOT NULL,
SURVEYUSERMAPID          			  NUMBER(38,0) NOT NULL,
INVESTIGATORNAME            		  VARCHAR2(200 CHAR) NOT NULL,
FACILITYNAME				  VARCHAR2(200 CHAR) NOT NULL,
INVESTIGATOREMAIL            		  VARCHAR2(200 CHAR) NOT NULL,
INVESTIGATORPHONE				  VARCHAR2(200 CHAR) NOT NULL,
ISACTIVE          			  VARCHAR2(1 CHAR) NOT NULL,
CREATEDBY                  	  VARCHAR2(100 CHAR) NOT NULL,
CREATEDDT                     DATE  NOT NULL ,     
MODIFIEDBY                    VARCHAR2(100 CHAR),
MODIFIEDDT      	          DATE
);

ALTER TABLE TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR  ADD CONSTRAINT TBL_SURVEYREFERINVESTIGATOR_PK PRIMARY KEY (SURVEYREFERINVESTIGATORID);
ALTER TABLE TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR ADD CONSTRAINT TBL_SURVEYREFERINVESTIGATOR_FK FOREIGN KEY ( SURVEYID ) REFERENCES TBL_SURVEY ( SURVEYID );
ALTER TABLE TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR ADD CONSTRAINT TBL_SURVEYREFINVESTIGATOR_FK1 FOREIGN KEY ( SURVEYUSERMAPID ) REFERENCES TBL_SURVEYUSERMAP ( SURVEYUSERMAPID );
CREATE SEQUENCE TCSIP_CPORTAL.SEQ_SURVEYREFERINVESTIGATOR  MINVALUE 1 MAXVALUE 999999999999999999999999999 START WITH 1 INCREMENT BY 1 NOCACHE;

COMMENT ON TABLE TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR  IS 'Table to store the referred investigator by Recipients, R2.1 new feature';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.SURVEYREFERINVESTIGATORID IS 'Sequence generated primary key';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.SURVEYID IS 'Foreign key for TBL_SURVEY, SURVEYID column';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.SURVEYUSERMAPID IS 'Foreign key for TBL_SURVEYUSERMAP, SURVEYUSERMAPIDID column'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.INVESTIGATORNAME IS 'Investigator Name';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.FACILITYNAME IS 'Facility name'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.INVESTIGATOREMAIL IS 'Investigator email id';
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.INVESTIGATORPHONE IS 'Investigator phone number'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.ISACTIVE IS 'Isactive status'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.CREATEDDT IS 'Created date'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.CREATEDBY IS 'Created by'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.MODIFIEDDT IS 'Modified date'; 
COMMENT ON COLUMN TCSIP_CPORTAL.TBL_SURVEYREFERINVESTIGATOR.MODIFIEDBY IS 'Modified by'; 

ALTER TABLE TCSIP_CPORTAL.TBL_SURVEYQUESTION MODIFY SURVEYQUESTITLE VARCHAR2(2500 CHAR);
ALTER TABLE TCSIP_CPORTAL.TBL_SURVEYANSWER  MODIFY SURVEYANSTITLE  VARCHAR2(2500 CHAR);
ALTER TABLE TCSIP_CPORTAL.TBL_SURVEYSECTION MODIFY SECTIONTITLE VARCHAR2(250 CHAR);